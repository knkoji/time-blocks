<!DOCTYPE html>
<html>
  <head>
    <title>Timeblocks</title>
    <%= csrf_meta_tags %>

    <%= stylesheet_link_tag    'application', media: 'all' %>
    <%= javascript_include_tag 'application' %>
  </head>

  <body>
    <h1>TIMEBLOCKS</h1>
    <h2>Create Clock!</h2>

    <ul id="clocks"></ul>

    <span id="clock-create">
      <button id="clock-creator" type="button">create clock</button>
    </span>

    <!-- Javascript -->
    <script type="text/javascript">
      // document.getElementById('hello').onclick = function(e) {
      //   alert('Hello World! We\'re Making Clocks!');
      // };

      let clockCreator = document.getElementById('clock-creator');

      clockCreator.addEventListener('click', function() {
        let clocks = document.getElementById('clocks');
        let newClock = createClock();
        clocks.prepend(newClock);
      });

      function createClock() {
        var clockLi = document.createElement('li');
        var clockP = document.createElement('p');
        var rightNow = new Date();

        clockLi.className = 'clock';
        clockP.textContent = renderTimeStr(rightNow);
        clockLi.appendChild(clockP);

        setInterval(function() {
          clockP.textContent = renderTimeStr(new Date());
        }, 1000);

        return clockLi;
      }

      function renderTimeStr(dateTime, clockType = false) {
        let timeHr = dateTime.getHours();
        let timeMin = dateTime.getMinutes();
        let timeSec = dateTime.getSeconds();
        let clockStr = "[<< " + timeHr + " : " + timeMin + " : " + timeSec + " >>]";
        let clockTypeStr = "clocktype: " + clockType;
        return clockStr + clockTypeStr;
      }

      function updateClock(clock) {
        console.log(clock);
      }

    </script>
    <%= yield %>
  </body>

</html>
